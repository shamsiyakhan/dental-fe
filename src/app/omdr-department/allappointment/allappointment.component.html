<!-- General Checkup -->
<div class="header">
  <span class="profile-text">Appointments</span>
  <span class="notification-icon">ğŸ””</span>
</div>

<div class="tabs">
  <div class="tab" [class.active]="activeTab === 'allocation'" (click)="selectTab('allocation')">
    Allocation
  </div>
  <div class="tab" [class.active]="activeTab === 'upcoming'" (click)="selectTab('upcoming')">
    Upcoming
  </div>
  <div class="tab" [class.active]="activeTab === 'in-progress'" (click)="selectTab('in-progress')">
    In-progress
  </div>
  <div class="tab" [class.active]="activeTab === 'completed'" (click)="selectTab('completed')">
    Completed
  </div>


</div>

<!-- Optional: Conditional content -->
<div class="tab-content">
  <ng-container [ngSwitch]="activeTab">
    <div class="wrapper" *ngSwitchCase="'upcoming'">

      <div class="search-bar">
        <input type="text" placeholder="Search patient..." [(ngModel)]="searchText" (input)="filterPatients()">
      </div>

      <div class="patient-card" *ngFor="let patient of filteredUnPaidPatients">
        <div class="card-header">
          <div class="patient-info">
            <h3>{{ patient.patient_name }}</h3>
            <p><strong>Phone:</strong> {{ patient.patient_phone }}</p>
          </div>
          <div class="status-info">
            <span class="status" [ngClass]="patient.payment_status.toLowerCase()">
              {{ patient.payment_status }}
            </span>
          </div>
        </div>

        <div class="card-body">
          <p><strong>Treatment:</strong> {{ patient.treatment_name }}</p>
          <p><strong>Issue Date:</strong> {{ patient.issue_date | date:'mediumDate' }}</p>
          <p><strong>Finding:</strong> {{ patient.finding || 'N/A' }}</p>
          <p><strong>History:</strong> {{ patient.history || 'N/A' }}</p>
        </div>

        <div class="card-footer">
          <button class="assign-btn" (click)="assignDoctor(patient)" disabled style="background-color: grey;">
            Assign Doctor
          </button>
        </div>
      </div>


    </div>

    <div *ngSwitchCase="'personal'" style="margin: 10px 30px;"></div>
    <div *ngSwitchCase="'professional'" style="margin: 10px 30px;"></div>

  </ng-container>
</div>


<!-- in progress -->

<div class="tab-content">
  <ng-container [ngSwitch]="activeTab">
    <div class="wrapper" *ngSwitchCase="'in-progress'">

      <div class="search-bar">
        <input type="text" placeholder="Search patient..." [(ngModel)]="searchText"
          (input)="filterInProgressPatients()">
      </div>

      <div class="patient-card" *ngFor="let patient of filteredInProgressAppointments">
        <div class="card-header">
          <div class="patient-info">
            <h3>{{ patient.patient_name }}</h3>
            <p><strong>Phone:</strong> {{ patient.patient_phone }}</p>
          </div>
          <div class="status-info">
            <span class="status" [ngClass]="patient.payment_status.toLowerCase()">
              {{ patient.payment_status }}
            </span>
          </div>
        </div>

        <div class="card-body">
          <p><strong>Treatment:</strong> {{ patient.treatment_name }}</p>
          <p><strong>Issue Date:</strong> {{ patient.issue_date | date:'mediumDate' }}</p>
          <p><strong>Finding:</strong> {{ patient.finding || 'N/A' }}</p>
          <p><strong>History:</strong> {{ patient.history || 'N/A' }}</p>
        </div>

        <div class="card-footer">
          <button class="assign-btn" disabled>
            Treatment Ongoing
          </button>
        </div>
      </div>

    </div>

  </ng-container>
</div>



<!-- complete -->
<div class="tab-content">
  <ng-container [ngSwitch]="activeTab">
    <div class="wrapper" *ngSwitchCase="'completed'">

      <div class="appointments-container">
        <div class="header">
          <h3><i class="fa fa-calendar"></i>Completed Appointments</h3>
          <select (change)="onFilterChange($event.target)">
            <option value="today">Today</option>
            <option value="yesterday">Yesterday</option>
            <option value="thisWeek">This Week</option>
            <option value="all">All</option>
          </select>
        </div>

        <div class="search-bar">
          <input type="text" placeholder="Search patient..." [(ngModel)]="searchText"
            (input)="filterInProgressPatients()">
        </div>

        <div class="patient-card" *ngFor="let patient of filteredCompletedAppointments">
          <div class="card-header">
            <div class="patient-info">
              <h3>{{ patient.patient_name }}</h3>
              <p><strong>Phone:</strong> {{ patient.patient_phone }}</p>
            </div>
            <div class="status-info">
              <span class="status" [ngClass]="patient.status.toLowerCase()">
                {{ patient.status }}
              </span>
            </div>
          </div>

          <div class="card-body">
            <p><strong>Treatment:</strong> {{ patient.treatment_name }}</p>
            <!--  <p><strong>Issue Date:</strong> {{ patient.issue_date | date:'mediumDate' }}</p> -->
            <p><strong>Finding:</strong> {{ patient.finding || 'N/A' }}</p>
            <p><strong>History:</strong> {{ patient.history || 'N/A' }}</p>
            <p><strong>Treatment Status:</strong> {{ patient.history || 'N/A' }}</p>
          </div>

          <div class="card-footer">
            <button class="assign-btn" disabled>
             Appointment Completed
            </button>
          </div>
        </div>


      </div>

    </div>

  </ng-container>
</div>


<div class="tab-content">
  <ng-container [ngSwitch]="activeTab">
    <div class="wrapper" *ngSwitchCase="'allocation'">

      <div class="search-bar">
        <input type="text" placeholder="Search patient..." [(ngModel)]="searchText" (input)="filterPatients()">
      </div>

      <div class="patient-card" *ngFor="let patient of filteredPatients">
        <div class="card-header">
          <div class="patient-info">
            <h3>{{ patient.patient_name }}</h3>
            <p><strong>Phone:</strong> {{ patient.patient_phone }}</p>
          </div>
          <div class="status-info">
            <span class="status" [ngClass]="patient.payment_status.toLowerCase()">
              {{ patient.payment_status }}
            </span>
          </div>
        </div>

        <div class="card-body">
          <p><strong>Treatment:</strong> {{ patient.treatment_name }}</p>
          <p><strong>Issue Date:</strong> {{ patient.issue_date | date:'mediumDate' }}</p>
          <p><strong>Finding:</strong> {{ patient.finding || 'N/A' }}</p>
          <p><strong>History:</strong> {{ patient.history || 'N/A' }}</p>
        </div>

        <div class="card-footer">
          <button class="assign-btn" (click)="assignDoctor(patient)">
            Assign Doctor
          </button>
        </div>
      </div>

    </div>
  </ng-container>
</div>