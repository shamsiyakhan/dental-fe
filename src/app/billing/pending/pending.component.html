<div class="billing-container">

  <!-- Main Section -->
  <main class="main-content">
    <!-- Header -->
    <header class="header">
      <input type="text" placeholder="Search treatments, patients..." class="search-bar" />
      <div class="user-info">
        <div class="user-details">
          <h4>Dr. Sarah Johnson</h4>
          <p>Administrator</p>
        </div>
        <div class="avatar">SJ</div>
      </div>
    </header>

    <!-- Content -->
    <section class="content">
      <h2>Pending Bills</h2>
      <p class="subtitle">Outstanding treatments awaiting payment</p>

      <div *ngIf="loading" class="text-center py-6 text-blue-600">Loading data...</div>

      <div *ngIf="!loading">
        <div class="cards">
          <!-- Total Pending Amount -->
          <div class="card">
            <h3>Total Pending Amount</h3>
            <p class="amount">â‚¹{{ totalUnpaidAmount | number:'1.2-2' }}</p>
            <span>{{ unpaidCount }} pending bills</span>
          </div>

          <!-- Static Example (Can later link to overdue logic) -->
          <div class="card alert">
            <h3>Overdue Bills</h3>
            <p class="overdue">{{ unpaidList.length > 3 ? 3 : unpaidList.length }}</p>
            <span class="urgent">Need immediate attention</span>
          </div>
        </div>

        <!-- Table -->
        <div class="table-container" *ngIf="unpaidList.length > 0; else noUnpaid">
          <h3>Outstanding Treatments</h3>
          <table>
            <thead>
              <tr>
                <th>Treatment ID</th>
                <th>Treatment Name</th>
                <th>Doctor ID</th>
                <th>Patient Name</th>
                <th>Department Name</th>
                <th>Issue Date</th>
                <th>Total Charges</th>
                <th>Status</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let t of unpaidList">
                <td>{{ t.treatment_id }}</td>
                <td>{{ t.treatment_name }}</td>
                <td>{{ t.doctorid }}</td>
                <td>{{ t.patient_name }}</td>
                <td>{{ t.department_name }}</td>
                <td>{{ t.issue_date | date:'mediumDate' }}</td>
                <td>â‚¹{{ t.total_charges | number:'1.2-2' }}</td>
                <td>
                  <span class="status pending">UnPaid</span>
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- No unpaid data -->
        <ng-template #noUnpaid>
          <div class="no-data">
            <h4>No unpaid treatments found ðŸŽ‰</h4>
            <p>All bills are cleared for now.</p>
          </div>
        </ng-template>
      </div>
    </section>
  </main>
</div>
